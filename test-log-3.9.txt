============================= test session starts ==============================
platform linux -- Python 3.13.7, pytest-8.4.1, pluggy-1.6.0
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /var/home/dlafreniere/projects/pure3270
configfile: pytest.ini
plugins: cov-6.3.0, asyncio-1.1.0, benchmark-5.1.0, leaks-0.3.1, hypothesis-6.139.2, timeout-2.4.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 503 items / 20 deselected / 483 selected

tests/test_aid_support.py::TestAIDSupport::test_session_pf_method_exists PASSED [  0%]
tests/test_aid_support.py::TestAIDSupport::test_session_pa_method_exists PASSED [  0%]
tests/test_aid_support.py::TestAIDSupport::test_session_pf_calls_async_pf PASSED [  0%]
tests/test_aid_support.py::TestAIDSupport::test_session_pa_calls_async_pa PASSED [  0%]
tests/test_aid_support.py::TestAIDSupport::test_async_session_key_method_extended_aid_map
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [  1%]
tests/test_cli.py::test_main_no_args PASSED                              [  1%]
tests/test_cli.py::test_main_with_host PASSED                            [  1%]
tests/test_cli.py::test_main_with_script PASSED                          [  1%]
tests/test_data_stream.py::TestDataStreamParser::test_init PASSED        [  1%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_wcc PASSED   [  2%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_aid PASSED   [  2%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_sba PASSED   [  2%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_sf PASSED    [  2%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_ra
-------------------------------- live log call ---------------------------------
WARNING  pure3270.protocol.data_stream:data_stream.py:672 RA stub: Repeat 0x40 from (0, 0) to (0, 5)
PASSED                                                                   [  2%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_ge
-------------------------------- live log call ---------------------------------
WARNING  pure3270.protocol.data_stream:data_stream.py:718 Incomplete GE order
PASSED                                                                   [  3%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_write PASSED [  3%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_data PASSED  [  3%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_bind_structured_field PASSED [  3%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_incomplete PASSED [  3%]
tests/test_data_stream.py::TestDataStreamParser::test_get_aid PASSED     [  4%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_scs_ctl_codes PASSED [  4%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_data_stream_ctl PASSED [  4%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_structured_field
-------------------------------- live log call ---------------------------------
WARNING  pure3270.protocol.data_stream:data_stream.py:929 Unknown structured field type 0x01, data length 2, skipping
PASSED                                                                   [  4%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_unknown_order_treated_as_text_data PASSED [  4%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_ic_order PASSED [  5%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_pt_order PASSED [  5%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_scs_data_type
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.data_stream:data_stream.py:476 Received SCS_DATA - routing to printer buffer
PASSED                                                                   [  5%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_nvt_data_type PASSED [  5%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_response_data_type PASSED [  6%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_request_data_type PASSED [  6%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_sscp_lu_data_type PASSED [  6%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_print_eoj_data_type PASSED [  6%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_bind_image_data_type
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.data_stream:data_stream.py:406 Received BIND_IMAGE data type: 3c00050301020304. Delegating to BIND-IMAGE structured field handler.
PASSED                                                                   [  6%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_bind_image_structured_field_detailed
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.data_stream:data_stream.py:406 Received BIND_IMAGE data type: 3c000a03060100180050030202. Delegating to BIND-IMAGE structured field handler.
WARNING  pure3270.protocol.data_stream:data_stream.py:1071 Expected BIND-IMAGE type 0x03, got 0x00
PASSED                                                                   [  7%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_unhandled_data_type_defaults_to_tn3270_data PASSED [  7%]
tests/test_data_stream.py::TestDataStreamParser::test_parse_tn3270_data_type PASSED [  7%]
tests/test_data_stream.py::TestDataStreamSender::test_build_read_modified_all PASSED [  7%]
tests/test_data_stream.py::TestDataStreamSender::test_build_read_modified_fields PASSED [  7%]
tests/test_data_stream.py::TestDataStreamSender::test_build_key_press PASSED [  8%]
tests/test_data_stream.py::TestDataStreamSender::test_build_write PASSED [  8%]
tests/test_data_stream.py::TestDataStreamSender::test_build_sba PASSED   [  8%]
tests/test_data_stream.py::TestDataStreamSender::test_build_scs_ctl_codes PASSED [  8%]
tests/test_data_stream.py::TestDataStreamSender::test_build_data_stream_ctl PASSED [  8%]
tests/test_data_stream.py::TestDataStreamSender::test_build_query_sf PASSED [  9%]
tests/test_data_stream.py::test_parse_sample_wcc PASSED                  [  9%]
tests/test_data_stream.py::test_parse_sample_sba PASSED                  [  9%]
tests/test_data_stream.py::test_parse_sample_write PASSED                [  9%]
tests/test_emulation.py::TestField::test_field_init PASSED               [  9%]
tests/test_emulation.py::TestField::test_field_get_content PASSED        [ 10%]
tests/test_emulation.py::TestField::test_field_set_content PASSED        [ 10%]
tests/test_emulation.py::TestField::test_field_repr PASSED               [ 10%]
tests/test_emulation.py::TestScreenBuffer::test_init PASSED              [ 10%]
tests/test_emulation.py::TestScreenBuffer::test_clear PASSED             [ 10%]
tests/test_emulation.py::TestScreenBuffer::test_set_position_and_get_position PASSED [ 11%]
tests/test_emulation.py::TestScreenBuffer::test_write_char PASSED        [ 11%]
tests/test_emulation.py::TestScreenBuffer::test_write_char_out_of_bounds PASSED [ 11%]
tests/test_emulation.py::TestScreenBuffer::test_to_text PASSED           [ 11%]
tests/test_emulation.py::TestScreenBuffer::test_update_from_stream PASSED [ 12%]
tests/test_emulation.py::TestScreenBuffer::test_get_field_content PASSED [ 12%]
tests/test_emulation.py::TestScreenBuffer::test_read_modified_fields PASSED [ 12%]
tests/test_emulation.py::TestScreenBuffer::test_repr PASSED              [ 12%]
tests/test_emulation.py::TestEBCDICCodec::test_init PASSED               [ 12%]
tests/test_emulation.py::TestEBCDICCodec::test_encode PASSED             [ 13%]
tests/test_emulation.py::TestEBCDICCodec::test_encode_unknown_char PASSED [ 13%]
tests/test_emulation.py::TestEBCDICCodec::test_decode PASSED             [ 13%]
tests/test_emulation.py::TestEBCDICCodec::test_decode_translate PASSED   [ 13%]
tests/test_emulation.py::TestEBCDICCodec::test_encode_to_unicode_table PASSED [ 13%]
tests/test_emulation.py::TestEBCDICCodec::test_decode_unmapped_bytes PASSED [ 14%]
tests/test_emulation.py::TestEBCDICCodec::test_encode_surrogate_escape PASSED [ 14%]
tests/test_emulation.py::TestEBCDICCodec::test_round_trip_mapped PASSED  [ 14%]
tests/test_emulation.py::TestEBCDICCodec::test_round_trip_unmapped PASSED [ 14%]
tests/test_emulation.py::TestEBCDICCodec::test_decode_mock_data PASSED   [ 14%]
tests/test_emulation.py::test_emulation_exception PASSED                 [ 15%]
tests/test_emulation.py::test_performance_buffer_fill SKIPPED (Perfo...) [ 15%]
tests/test_emulation.py::test_update_from_sample_stream PASSED           [ 15%]
tests/test_emulation.py::test_basic_session_clear PASSED                 [ 15%]
tests/test_emulation.py::test_read_modified_fields_after_change PASSED   [ 15%]
tests/test_emulation.py::test_move_cursor_to_first_input_field PASSED    [ 16%]
tests/test_emulation.py::test_move_cursor_to_first_input_field_no_input_fields PASSED [ 16%]
tests/test_emulation.py::test_move_cursor_to_next_input_field PASSED     [ 16%]
tests/test_emulation.py::test_move_cursor_to_next_input_field_no_input_fields PASSED [ 16%]
tests/test_emulation.py::test_move_cursor_to_next_input_field_single_input_field_wraps_around PASSED [ 16%]
tests/test_emulation_ebcdic.py::test_ebcdic_codec_decode PASSED          [ 17%]
tests/test_emulation_ebcdic.py::test_ebcdic_codec_encode PASSED          [ 17%]
tests/test_emulation_ebcdic.py::test_translate_ebcdic_to_ascii PASSED    [ 17%]
tests/test_emulation_ebcdic.py::test_translate_ascii_to_ebcdic PASSED    [ 17%]
tests/test_emulation_ebcdic.py::test_ebcdic_edge_cases PASSED            [ 18%]
tests/test_emulation_ebcdic.py::test_codec_errors PASSED                 [ 18%]
tests/test_extended_field_attributes.py::TestExtendedFieldAttributes::test_field_extended_attributes PASSED [ 18%]
tests/test_extended_field_attributes.py::TestExtendedFieldAttributes::test_field_default_attributes PASSED [ 18%]
tests/test_extended_field_attributes.py::TestExtendedFieldAttributes::test_screen_buffer_extended_attribute_storage PASSED [ 18%]
tests/test_extended_field_attributes.py::TestExtendedFieldAttributes::test_field_repr_includes_extended_attributes PASSED [ 19%]
tests/test_field_modification.py::TestFieldModificationTracking::test_field_modification_with_write_char_fixed_behavior PASSED [ 19%]
tests/test_field_modification.py::TestFieldModificationTracking::test_field_modification_with_set_content PASSED [ 19%]
tests/test_field_modification.py::TestFieldModificationTracking::test_read_modified_fields_basic PASSED [ 19%]
tests/test_integration.py::TestIntegration::test_end_to_end_macro_execution
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [ 19%]
tests/test_integration.py::TestIntegration::test_ic_pt_order_integration
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [ 20%]
tests/test_isolated_negotiation.py::test_isolated_negotiation_with_fixes
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626495509840, writer=None, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe6284f9d30>, is_printer_session=False
FAILED                                                                   [ 20%]
tests/test_memory_limiting.py::test_normal_memory_usage PASSED           [ 20%]
tests/test_memory_limiting.py::test_memory_limiting_documentation PASSED [ 20%]
tests/test_missing_s3270_actions.py::TestMissingS3270Actions::test_compose_action
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [ 20%]
tests/test_missing_s3270_actions.py::TestMissingS3270Actions::test_cookie_action
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [ 21%]
tests/test_missing_s3270_actions.py::TestMissingS3270Actions::test_expect_action
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [ 21%]
tests/test_missing_s3270_actions.py::TestMissingS3270Actions::test_fail_action
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [ 21%]
tests/test_negotiation_inference.py::test_infer_tn3270e_from_trace[-False]
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494645392, writer=None, parser=None, screen_buffer=<tests.test_negotiation_inference.SB object at 0x7fe6284fa270>, handler=None, is_printer_session=False
PASSED                                                                   [ 21%]
tests/test_negotiation_inference.py::test_infer_tn3270e_from_trace[\xff\xfb\x19-True]
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494645392, writer=None, parser=None, screen_buffer=<tests.test_negotiation_inference.SB object at 0x7fe6284fa270>, handler=None, is_printer_session=False
PASSED                                                                   [ 21%]
tests/test_negotiation_inference.py::test_infer_tn3270e_from_trace[\xff\xfc$-False]
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494645392, writer=None, parser=None, screen_buffer=<tests.test_negotiation_inference.SB object at 0x7fe6284fa270>, handler=None, is_printer_session=False
PASSED                                                                   [ 22%]
tests/test_negotiation_inference.py::test_infer_tn3270e_from_trace[\xff\xfb\x19\xff\xfc$-False]
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494645392, writer=None, parser=None, screen_buffer=<tests.test_negotiation_inference.SB object at 0x7fe6284fa270>, handler=None, is_printer_session=False
PASSED                                                                   [ 22%]
tests/test_negotiation_sequence.py::test_telnet_option_sequence_basic
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494648592, writer=<tests.test_negotiation_sequence.DummyWriter object at 0x7fe6284fa270>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe628426490>, is_printer_session=False
INFO     pure3270.protocol.negotiator:negotiator.py:379 [NEGOTIATION] Sending IAC WILL TERMINAL-TYPE and IAC DO TERMINAL-TYPE
INFO     pure3270.protocol.negotiator:negotiator.py:390 [NEGOTIATION] Initial TTYPE negotiation commands sent. Awaiting server response...
INFO     pure3270.protocol.negotiator:negotiator.py:636 [NEGOTIATION] Received IAC command: 0xfb, option: 0x18
INFO     pure3270.protocol.negotiator:negotiator.py:695 [NEGOTIATION] Received IAC WILL 0x18
INFO     pure3270.protocol.negotiator:negotiator.py:697 [NEGOTIATION] Sending IAC DO TTYPE in response to WILL TTYPE
INFO     pure3270.protocol.negotiator:negotiator.py:636 [NEGOTIATION] Received IAC command: 0xfd, option: 0x0
INFO     pure3270.protocol.negotiator:negotiator.py:649 [NEGOTIATION] Sending IAC WILL BINARY in response to DO BINARY
INFO     pure3270.protocol.negotiator:negotiator.py:636 [NEGOTIATION] Received IAC command: 0xfd, option: 0x19
INFO     pure3270.protocol.negotiator:negotiator.py:655 [NEGOTIATION] Sending IAC WILL EOR in response to DO EOR
INFO     pure3270.protocol.negotiator:negotiator.py:636 [NEGOTIATION] Received IAC command: 0xfd, option: 0x28
INFO     pure3270.protocol.negotiator:negotiator.py:659 [NEGOTIATION] Sending IAC WILL TN3270E in response to DO TN3270E
PASSED                                                                   [ 22%]
tests/test_negotiation_sequence.py::test_fallback_on_wont_tn3270e_allows_ascii
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494308432, writer=<tests.test_negotiation_sequence.DummyWriter object at 0x7fe628427c50>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe628427ed0>, is_printer_session=False
INFO     pure3270.protocol.negotiator:negotiator.py:379 [NEGOTIATION] Sending IAC WILL TERMINAL-TYPE and IAC DO TERMINAL-TYPE
INFO     pure3270.protocol.negotiator:negotiator.py:390 [NEGOTIATION] Initial TTYPE negotiation commands sent. Awaiting server response...
INFO     pure3270.protocol.negotiator:negotiator.py:636 [NEGOTIATION] Received IAC command: 0xfc, option: 0x28
INFO     pure3270.protocol.negotiator:negotiator.py:740 [NEGOTIATION] Received IAC WONT 0x28
INFO     pure3270.protocol.negotiator:negotiator.py:778 Remote refused TN3270E/TERMINAL-LOCATION (WONT 0x28) -- falling back to ASCII/VT100 mode
INFO     pure3270.protocol.negotiator:negotiator.py:590 Switched to ASCII/VT100 mode (s3270 compatibility)
PASSED                                                                   [ 22%]
tests/test_negotiation_sequence.py::test_forced_tn3270_mode_ignores_wont_tn3270e
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494309072, writer=<tests.test_negotiation_sequence.DummyWriter object at 0x7fe6283d4190>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe6284a4d60>, is_printer_session=False
INFO     pure3270.protocol.negotiator:negotiator.py:379 [NEGOTIATION] Sending IAC WILL TERMINAL-TYPE and IAC DO TERMINAL-TYPE
INFO     pure3270.protocol.negotiator:negotiator.py:390 [NEGOTIATION] Initial TTYPE negotiation commands sent. Awaiting server response...
INFO     pure3270.protocol.negotiator:negotiator.py:636 [NEGOTIATION] Received IAC command: 0xfc, option: 0x28
INFO     pure3270.protocol.negotiator:negotiator.py:740 [NEGOTIATION] Received IAC WONT 0x28
INFO     pure3270.protocol.negotiator:negotiator.py:765 Remote refused TN3270E (WONT 0x28); continuing in forced basic TN3270 mode.
PASSED                                                                   [ 22%]
tests/test_negotiation_sequence.py::test_force_mode_ascii_skips_negotiation
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494309392, writer=<tests.test_negotiation_sequence.DummyWriter object at 0x7fe6284a4fc0>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe6284a50f0>, is_printer_session=False
INFO     pure3270.protocol.negotiator:negotiator.py:408 [NEGOTIATION] force_mode=ascii specified; skipping TN3270E negotiation and enabling ASCII mode.
INFO     pure3270.protocol.negotiator:negotiator.py:590 Switched to ASCII/VT100 mode (s3270 compatibility)
PASSED                                                                   [ 23%]
tests/test_negotiation_sequence.py::test_force_mode_tn3270e_refusal_without_fallback_raises
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494309712, writer=<tests.test_negotiation_sequence.DummyWriter object at 0x7fe6284a4e90>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe628418dd0>, is_printer_session=False
INFO     pure3270.protocol.negotiator:negotiator.py:379 [NEGOTIATION] Sending IAC WILL TERMINAL-TYPE and IAC DO TERMINAL-TYPE
INFO     pure3270.protocol.negotiator:negotiator.py:390 [NEGOTIATION] Initial TTYPE negotiation commands sent. Awaiting server response...
INFO     pure3270.protocol.negotiator:negotiator.py:636 [NEGOTIATION] Received IAC command: 0xfc, option: 0x28
INFO     pure3270.protocol.negotiator:negotiator.py:740 [NEGOTIATION] Received IAC WONT 0x28
ERROR    pure3270.protocol.negotiator:negotiator.py:749 Remote refused TN3270E/TERMINAL-LOCATION (WONT 0x28); fallback disabled (force_mode=tn3270e).
INFO     pure3270.protocol.negotiator:negotiator.py:444 [NEGOTIATION] Starting TN3270E negotiation: waiting for server DEVICE-TYPE SEND.
ERROR    pure3270.protocol.errors:errors.py:62 Socket/SSL operation failed:
Traceback (most recent call last):
  File "/usr/lib64/python3.13/asyncio/tasks.py", line 507, in wait_for
    return await fut
           ^^^^^^^^^
  File "/usr/lib64/python3.13/asyncio/locks.py", line 213, in wait
    await fut
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/var/home/dlafreniere/projects/pure3270/pure3270/protocol/negotiator.py", line 454, in _negotiate_tn3270
    await asyncio.wait_for(self._device_type_is_event.wait(), timeout=5.0)
  File "/usr/lib64/python3.13/asyncio/tasks.py", line 506, in wait_for
    async with timeouts.timeout(timeout):
               ~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/usr/lib64/python3.13/asyncio/timeouts.py", line 116, in __aexit__
    raise TimeoutError from exc_val
TimeoutError
ERROR    pure3270.protocol.negotiator:negotiator.py:545 [NEGOTIATION] TN3270E negotiation explicitly refused and fallback disabled: Protocol operation failed:
ERROR    pure3270.protocol.errors:errors.py:98 Negotiation failed: TN3270E negotiation refused by host (fallback disabled): Protocol operation failed:
Traceback (most recent call last):
  File "/usr/lib64/python3.13/asyncio/tasks.py", line 507, in wait_for
    return await fut
           ^^^^^^^^^
  File "/usr/lib64/python3.13/asyncio/locks.py", line 213, in wait
    await fut
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/var/home/dlafreniere/projects/pure3270/pure3270/protocol/negotiator.py", line 454, in _negotiate_tn3270
    await asyncio.wait_for(self._device_type_is_event.wait(), timeout=5.0)
  File "/usr/lib64/python3.13/asyncio/tasks.py", line 506, in wait_for
    async with timeouts.timeout(timeout):
               ~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/usr/lib64/python3.13/asyncio/timeouts.py", line 116, in __aexit__
    raise TimeoutError from exc_val
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/var/home/dlafreniere/projects/pure3270/pure3270/protocol/negotiator.py", line 449, in _negotiate_tn3270
    async with safe_socket_operation():
               ~~~~~~~~~~~~~~~~~~~~~^^
  File "/var/home/dlafreniere/projects/pure3270/pure3270/protocol/errors.py", line 63, in __aexit__
    raise ProtocolError(f"Protocol operation failed: {exc_val}")
pure3270.exceptions.ProtocolError: Protocol operation failed:
PASSED                                                                   [ 23%]
tests/test_negotiation_subneg_trace.py::test_records_tn3270e_device_type_subneg
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310032, writer=<MagicMock id='140626495518240'>, parser=<MagicMock spec='DataStreamParser' id='140626495518912'>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
INFO     pure3270.protocol.negotiator:negotiator.py:1183 Received DEVICE-TYPE SEND, sending supported device types
PASSED                                                                   [ 23%]
tests/test_negotiation_trace.py::test_trace_basic_telnet_sequence
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494651472, writer=<MagicMock id='140626494666944'>, parser=<MagicMock spec='DataStreamParser' id='140626495514208'>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
INFO     pure3270.protocol.negotiator:negotiator.py:379 [NEGOTIATION] Sending IAC WILL TERMINAL-TYPE and IAC DO TERMINAL-TYPE
INFO     pure3270.protocol.negotiator:negotiator.py:390 [NEGOTIATION] Initial TTYPE negotiation commands sent. Awaiting server response...
INFO     pure3270.protocol.negotiator:negotiator.py:636 [NEGOTIATION] Received IAC command: 0xfd, option: 0x0
INFO     pure3270.protocol.negotiator:negotiator.py:649 [NEGOTIATION] Sending IAC WILL BINARY in response to DO BINARY
INFO     pure3270.protocol.negotiator:negotiator.py:636 [NEGOTIATION] Received IAC command: 0xfd, option: 0x19
INFO     pure3270.protocol.negotiator:negotiator.py:655 [NEGOTIATION] Sending IAC WILL EOR in response to DO EOR
INFO     pure3270.protocol.negotiator:negotiator.py:636 [NEGOTIATION] Received IAC command: 0xfd, option: 0x28
INFO     pure3270.protocol.negotiator:negotiator.py:659 [NEGOTIATION] Sending IAC WILL TN3270E in response to DO TN3270E
INFO     pure3270.protocol.negotiator:negotiator.py:636 [NEGOTIATION] Received IAC command: 0xfb, option: 0x28
INFO     pure3270.protocol.negotiator:negotiator.py:695 [NEGOTIATION] Received IAC WILL 0x28
INFO     pure3270.protocol.negotiator:negotiator.py:713 [NEGOTIATION] Sending IAC DO TN3270E in response to WILL TN3270E
PASSED                                                                   [ 23%]
tests/test_negotiation_trace.py::test_trace_decision_forced_ascii
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494645392, writer=<MagicMock id='140626495511184'>, parser=<MagicMock spec='DataStreamParser' id='140626494242896'>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
INFO     pure3270.protocol.negotiator:negotiator.py:408 [NEGOTIATION] force_mode=ascii specified; skipping TN3270E negotiation and enabling ASCII mode.
INFO     pure3270.protocol.negotiator:negotiator.py:590 Switched to ASCII/VT100 mode (s3270 compatibility)
PASSED                                                                   [ 24%]
tests/test_negotiation_trace.py::test_trace_timeout_with_fallback
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494645392, writer=<MagicMock id='140626495509504'>, parser=<MagicMock spec='DataStreamParser' id='140626494244576'>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
INFO     pure3270.protocol.negotiator:negotiator.py:444 [NEGOTIATION] Starting TN3270E negotiation: waiting for server DEVICE-TYPE SEND.
FAILED                                                                   [ 24%]
tests/test_negotiator.py::TestNegotiator::test_init
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494308752, writer=<AsyncMock id='140626494666944'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283ce0a0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
PASSED                                                                   [ 24%]
tests/test_negotiator.py::TestNegotiator::test_get_next_seq_number
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494308432, writer=<AsyncMock id='140626495520256'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283ce2b0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
PASSED                                                                   [ 24%]
tests/test_negotiator.py::TestNegotiator::test_outgoing_request_stores_pending_request
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494308752, writer=<AsyncMock id='140626495519248'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283ce570>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
PASSED                                                                   [ 24%]
tests/test_negotiator.py::TestNegotiator::test_handle_tn3270e_response_correlates_and_removes_pending_request
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494308432, writer=<AsyncMock id='140626495514544'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283ce8e0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
PASSED                                                                   [ 25%]
tests/test_negotiator.py::TestNegotiator::test_handle_tn3270e_response_handles_unknown_seq_number
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494308752, writer=<AsyncMock id='140626495505472'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283cea40>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
PASSED                                                                   [ 25%]
tests/test_negotiator.py::TestNegotiator::test_negotiate_sends_ttype_commands
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494308432, writer=<AsyncMock id='140626494245920'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283ced00>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 25%]
tests/test_negotiator.py::TestNegotiator::test_negotiate_tn3270_successful
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494308752, writer=<AsyncMock id='140626494246592'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283cedb0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 25%]
tests/test_negotiator.py::TestNegotiator::test_negotiate_tn3270_timeout_fallback_to_ascii
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494309392, writer=<AsyncMock id='140626495505472'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283ce570>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 25%]
tests/test_negotiator.py::TestNegotiator::test_handle_device_type_is_sets_event_and_updates_negotiated_device_type
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310032, writer=<AsyncMock id='140626495514208'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283cf330>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:1155 Server assigned device type: IBM-3278-2
PASSED                                                                   [ 26%]
tests/test_negotiator.py::TestNegotiator::test_handle_functions_is_sets_event_and_updates_negotiated_functions
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494309392, writer=<AsyncMock id='140626495512192'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283cf3e0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:1224 Server enabled functions: 0x05
PASSED                                                                   [ 26%]
tests/test_negotiator.py::TestNegotiator::test_negotiate_tn3270_uses_outgoing_request
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310032, writer=<AsyncMock id='140626495510176'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283cf8b0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 26%]
tests/test_negotiator.py::TestNegotiator::test_parse_tn3270e_subnegotiation_calls_handle_tn3270e_response
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310352, writer=<AsyncMock id='140626494246928'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283cfb70>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
PASSED                                                                   [ 26%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_do_ttype
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310032, writer=<AsyncMock id='140626494247936'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283cfd80>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 26%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_do_binary
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494309392, writer=<AsyncMock id='140626495510176'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283cf8b0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 27%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_do_eor
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494308752, writer=<AsyncMock id='140626495508832'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283ce570>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 27%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_do_tn3270e
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494308432, writer=<AsyncMock id='140626495513200'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628218100>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 27%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_do_unknown
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310672, writer=<AsyncMock id='140626495506144'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6282183c0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 27%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_dont
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310992, writer=<AsyncMock id='140626494248608'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628218680>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 27%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_will_ttype
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=<AsyncMock id='140626494243568'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628218940>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 28%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_will_binary
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310992, writer=<AsyncMock id='140626494246928'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283ced00>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 28%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_will_eor
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310672, writer=<AsyncMock id='140626495514544'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6282189f0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 28%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_will_tn3270e
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494308432, writer=<AsyncMock id='140626495519248'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628218470>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 28%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_will_unknown
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494308752, writer=<AsyncMock id='140626495520256'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628218cb0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 28%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_wont
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494309392, writer=<AsyncMock id='140626495511184'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628218f70>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 29%]
tests/test_negotiator.py::TestNegotiator::test_send_supported_device_types
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310032, writer=<AsyncMock id='140626494243904'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628219230>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 29%]
tests/test_negotiator.py::TestNegotiator::test_handle_device_type_subnegotiation_ibm_dynamic_sends_query_sf
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311632, writer=<AsyncMock id='140626494247600'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6282194f0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 29%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_do_terminal_location_sends_lu_name
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494309392, writer=<AsyncMock id='140626495511184'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6282192e0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 29%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_will_terminal_location
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494308752, writer=<AsyncMock id='140626495510176'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6282183c0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 30%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_do_bind_unit
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494308432, writer=<AsyncMock id='140626495508832'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628219650>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 30%]
tests/test_negotiator.py::TestNegotiator::test_handle_iac_command_will_bind_unit
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310672, writer=<AsyncMock id='140626495513200'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628219910>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 30%]
tests/test_negotiator.py::TestNegotiator::test_handle_device_type_subnegotiation_request_sends_supported_types
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310992, writer=<AsyncMock id='140626494243904'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628219bd0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 30%]
tests/test_negotiator.py::TestNegotiator::test_handle_sna_response_calls_handler_method
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=<AsyncMock id='140626494243568'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628219e90>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR                                                                    [ 30%]
tests/test_negotiator.py::TestNegotiator::test_update_printer_status_sets_printer_status_and_event
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310992, writer=<AsyncMock id='140626494250288'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628219f40>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:1373 Updating printer status: 0x01
PASSED                                                                   [ 31%]
tests/test_negotiator.py::TestNegotiator::test_update_printer_status_multiple_calls
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=<AsyncMock id='140626495508832'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6282199c0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:1373 Updating printer status: 0x01
INFO     pure3270.protocol.negotiator:negotiator.py:1373 Updating printer status: 0x02
PASSED                                                                   [ 31%]
tests/test_negotiator.py::TestNegotiator::test_handle_bind_image_updates_screen_dimensions
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310992, writer=<AsyncMock id='140626495510176'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628218470>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:1461 Reinitialized buffer and attributes for new size: 2560
INFO     pure3270.protocol.negotiator:negotiator.py:1469 Updated screen dimensions from BIND-IMAGE: 32x80
PASSED                                                                   [ 31%]
tests/test_negotiator.py::TestNegotiator::test_handle_bind_image_logs_query_reply_ids
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=<AsyncMock id='140626495511184'>, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe62821a150>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
PASSED                                                                   [ 31%]
tests/test_negotiator_enhancements.py::TestNegotiatorEnhancements::test_init_with_device_type_support
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe62821a4c0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
PASSED                                                                   [ 31%]
tests/test_negotiator_enhancements.py::TestNegotiatorEnhancements::test_parse_tn3270e_subnegotiation_invalid_data
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe62821a780>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
WARNING  pure3270.protocol.negotiator:negotiator.py:1244 Received empty FUNCTIONS IS; no functions supported
INFO     pure3270.protocol.negotiator:negotiator.py:1224 Server enabled functions: 0x03
PASSED                                                                   [ 32%]
tests/test_negotiator_enhancements.py::TestNegotiatorEnhancements::test_handle_device_type_subnegotiation
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe62821aa40>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
WARNING  pure3270.protocol.negotiator:negotiator.py:1189 Unhandled DEVICE-TYPE subnegotiation subtype: 0x01
INFO     pure3270.protocol.negotiator:negotiator.py:1155 Server assigned device type: IBM-DYNAMIC
INFO     pure3270.protocol.negotiator:negotiator.py:1159 IBM-DYNAMIC device type negotiated
PASSED                                                                   [ 32%]
tests/test_negotiator_enhancements.py::TestNegotiatorEnhancements::test_handle_functions_subnegotiation
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe62821ad00>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
WARNING  pure3270.protocol.negotiator:negotiator.py:1264 Unhandled FUNCTIONS subnegotiation subtype: 0x01
WARNING  pure3270.protocol.negotiator:negotiator.py:1244 Received empty FUNCTIONS IS; no functions supported
PASSED                                                                   [ 32%]
tests/test_negotiator_enhancements.py::TestNegotiatorEnhancements::test_send_supported_device_types_no_writer
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe62821afc0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR    pure3270.protocol.negotiator:negotiator.py:1290 Cannot send supported device types: writer is None
PASSED                                                                   [ 32%]
tests/test_negotiator_enhancements.py::TestNegotiatorEnhancements::test_send_supported_functions_no_writer
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe62821b330>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
ERROR    pure3270.protocol.negotiator:negotiator.py:1313 Cannot send functions: writer is None
PASSED                                                                   [ 32%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_parse_tn3270e_subnegotiation_edge_cases
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310992, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe62821b3e0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
WARNING  pure3270.protocol.negotiator:negotiator.py:890 Invalid TN3270E subnegotiation data:
WARNING  pure3270.protocol.negotiator:negotiator.py:890 Invalid TN3270E subnegotiation data: 00
PASSED                                                                   [ 33%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_handle_device_type_subnegotiation_invalid_data
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe62821b800>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
WARNING  pure3270.protocol.negotiator:negotiator.py:1142 Empty DEVICE-TYPE subnegotiation data
WARNING  pure3270.protocol.negotiator:negotiator.py:1189 Unhandled DEVICE-TYPE subnegotiation subtype: 0x01
INFO     pure3270.protocol.negotiator:negotiator.py:1186 Received DEVICE-TYPE REQUEST, sending supported device types
ERROR    pure3270.protocol.negotiator:negotiator.py:1290 Cannot send supported device types: writer is None
PASSED                                                                   [ 33%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_handle_functions_subnegotiation_invalid_data
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310992, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe62821b750>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
WARNING  pure3270.protocol.negotiator:negotiator.py:1214 Empty FUNCTIONS subnegotiation data
WARNING  pure3270.protocol.negotiator:negotiator.py:1264 Unhandled FUNCTIONS subnegotiation subtype: 0x01
WARNING  pure3270.protocol.negotiator:negotiator.py:1264 Unhandled FUNCTIONS subnegotiation subtype: 0x99
PASSED                                                                   [ 33%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_send_supported_device_types_no_writer
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe62821bac0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
ERROR    pure3270.protocol.negotiator:negotiator.py:1290 Cannot send supported device types: writer is None
PASSED                                                                   [ 33%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_send_supported_functions_no_writer
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310992, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628230050>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
ERROR    pure3270.protocol.negotiator:negotiator.py:1313 Cannot send functions: writer is None
PASSED                                                                   [ 33%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_is_printer_session_active
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628230260>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
PASSED                                                                   [ 34%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_receive_data_no_handler
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310992, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6282305d0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
PASSED                                                                   [ 34%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_read_iac_no_handler
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494645392, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe62821bac0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
PASSED                                                                   [ 34%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_negotiate_no_writer
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494651472, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe62821afc0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
PASSED                                                                   [ 34%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_handle_device_type_is_with_invalid_data
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494650832, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe62821a150>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:1155 Server assigned device type: incomplete
PASSED                                                                   [ 34%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_handle_device_type_request_with_no_supported_types
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494648592, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283cfd80>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:1186 Received DEVICE-TYPE REQUEST, sending supported device types
ERROR    pure3270.protocol.negotiator:negotiator.py:1290 Cannot send supported device types: writer is None
PASSED                                                                   [ 35%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_handle_functions_is_with_empty_data
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494650832, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6283cdde0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
WARNING  pure3270.protocol.negotiator:negotiator.py:1244 Received empty FUNCTIONS IS; no functions supported
PASSED                                                                   [ 35%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_handle_functions_request_with_no_supported_functions
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494648592, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628230730>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:1259 Received FUNCTIONS REQUEST, responding with IS supported functions
ERROR    pure3270.protocol.negotiator:negotiator.py:1272 Cannot send FUNCTIONS IS: writer is None
PASSED                                                                   [ 35%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_send_supported_device_types_with_empty_supported_list
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494649552, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628230940>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
PASSED                                                                   [ 35%]
tests/test_negotiator_missing_coverage.py::TestNegotiatorMissingCoverage::test_send_supported_functions_with_no_functions
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494648592, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe628230260>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
WARNING  pure3270.protocol.errors:errors.py:40 Failed to drain writer in _send_supported_functions: object MagicMock can't be used in 'await' expression
PASSED                                                                   [ 36%]
tests/test_patching.py::TestMonkeyPatchManager::test_init
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
PASSED                                                                   [ 36%]
tests/test_patching.py::TestMonkeyPatchManager::test_apply_module_patch
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:80 Patched module: s3270 -> Replacement
PASSED                                                                   [ 36%]
tests/test_patching.py::TestMonkeyPatchManager::test_apply_method_patch
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:107 Added method: MagicMock.test_method
PASSED                                                                   [ 36%]
tests/test_patching.py::TestMonkeyPatchManager::test_check_version_compatibility
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
WARNING  pure3270.patching.patching:patching.py:118 Version mismatch: expected 0.1.6, got 0.1.0
INFO     pure3270.patching.patching:patching.py:121 Graceful degradation: proceeding with partial compatibility
PASSED                                                                   [ 36%]
tests/test_patching.py::TestMonkeyPatchManager::test_apply_patches_success
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [ 37%]
tests/test_patching.py::TestMonkeyPatchManager::test_apply_patches_version_mismatch
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
WARNING  pure3270.patching.patching:patching.py:118 Version mismatch: expected 0.1.6, got 0.1.0
INFO     pure3270.patching.patching:patching.py:121 Graceful degradation: proceeding with partial compatibility
ERROR    pure3270.patching.patching:patching.py:24 Version incompatible: 0.1.0
ERROR    pure3270.patching.patching:patching.py:175 Patch error: Version incompatible: 0.1.0
ERROR    pure3270.patching.patching:patching.py:24 Version incompatible: 0.1.0
PASSED                                                                   [ 37%]
tests/test_patching.py::TestMonkeyPatchManager::test_apply_patches_no_p3270
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
WARNING  pure3270.patching.patching:patching.py:170 p3270 not installed:
PASSED                                                                   [ 37%]
tests/test_patching.py::TestMonkeyPatchManager::test_unpatch
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:211 Unpatched all
PASSED                                                                   [ 37%]
tests/test_patching.py::TestEnableReplacement::test_enable_replacement
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [ 37%]
tests/test_patching.py::TestEnableReplacement::test_enable_replacement_error
-------------------------------- live log call ---------------------------------
ERROR    pure3270.patching.patching:patching.py:24 Patch failed
PASSED                                                                   [ 38%]
tests/test_patching.py::test_patch_alias PASSED                          [ 38%]
tests/test_patching.py::TestPatchContext::test_context_manager PASSED    [ 38%]
tests/test_patching.py::test_real_patching_integration
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [ 38%]
tests/test_patching.py::test_patching_with_p3270_not_installed
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
WARNING  pure3270.patching.patching:patching.py:170 p3270 not installed: No module named 'p3270'
PASSED                                                                   [ 38%]
tests/test_patching.py::test_pure3270_patch_error
-------------------------------- live log call ---------------------------------
ERROR    pure3270.patching.patching:patching.py:24 Test patch error
PASSED                                                                   [ 39%]
tests/test_patching.py::test_patching_logging
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [ 39%]
tests/test_patching.py::test_performance_patching SKIPPED (pytest-be...) [ 39%]
tests/test_patching.py::test_patching_fallback
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:146 Graceful degradation: Version mismatch but continuing with patching
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [ 39%]
tests/test_patching.py::test_method_override
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:107 Added method: MagicMock.method
PASSED                                                                   [ 39%]
tests/test_patching.py::test_pure3270_patch_error_instantiation
-------------------------------- live log call ---------------------------------
ERROR    pure3270.patching.patching:patching.py:24 Test message
PASSED                                                                   [ 40%]
tests/test_patching.py::test_store_original_duplicate
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
PASSED                                                                   [ 40%]
tests/test_patching.py::test_apply_module_patch_with_original
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:80 Patched module: s3270 -> Replacement
PASSED                                                                   [ 40%]
tests/test_patching.py::test_apply_module_patch_logging
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:80 Patched module: s3270 -> Replacement
PASSED                                                                   [ 40%]
tests/test_patching.py::test_apply_method_patch_class
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:107 Added method: TestClass.test_method
PASSED                                                                   [ 40%]
tests/test_patching.py::test_apply_method_patch_instance_docstring
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:107 Added method: Mock.test_method
PASSED                                                                   [ 41%]
tests/test_patching.py::test_apply_method_patch_class_logging
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:107 Added method: TestClass.test_method
PASSED                                                                   [ 41%]
tests/test_patching.py::test_apply_method_patch_instance_logging
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:107 Added method: Mock.test_method
PASSED                                                                   [ 41%]
tests/test_patching.py::test_check_version_compatibility_no_expected
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
PASSED                                                                   [ 41%]
tests/test_patching.py::test_check_version_compatibility_mismatch_warning
-------------------------------- live log setup --------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
-------------------------------- live log call ---------------------------------
WARNING  pure3270.patching.patching:patching.py:118 Version mismatch: expected 0.1.6, got 0.1.0
INFO     pure3270.patching.patching:patching.py:121 Graceful degradation: proceeding with partial compatibility
PASSED                                                                   [ 42%]
tests/test_patching_advanced.py::test_enable_replacement_basic
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [ 42%]
tests/test_patching_advanced.py::test_enable_replacement_strict_version_fail
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
WARNING  pure3270.patching.patching:patching.py:118 Version mismatch: expected 0.1.6, got 0.1.0
INFO     pure3270.patching.patching:patching.py:121 Graceful degradation: proceeding with partial compatibility
ERROR    pure3270.patching.patching:patching.py:24 Version incompatible: 0.1.0
ERROR    pure3270.patching.patching:patching.py:175 Patch error: Version incompatible: 0.1.0
ERROR    pure3270.patching.patching:patching.py:24 Version incompatible: 0.1.0
PASSED                                                                   [ 42%]
tests/test_patching_advanced.py::test_enable_replacement_no_sessions
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [ 42%]
tests/test_patching_advanced.py::test_monkey_patch_manager_unpatch
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:211 Unpatched all
PASSED                                                                   [ 42%]
tests/test_patching_advanced.py::test_apply_method_patch
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:211 Unpatched all
PASSED                                                                   [ 43%]
tests/test_patching_advanced.py::test_apply_module_patch
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:211 Unpatched all
PASSED                                                                   [ 43%]
tests/test_patching_advanced.py::test_unpatch_method
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:211 Unpatched all
PASSED                                                                   [ 43%]
tests/test_patching_advanced.py::test_enable_replacement_internal PASSED [ 43%]
tests/test_patching_advanced.py::test_unpatch_full
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:211 Unpatched all
PASSED                                                                   [ 43%]
tests/test_patching_advanced.py::test_patching_version_mismatch
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
WARNING  pure3270.patching.patching:patching.py:118 Version mismatch: expected 0.1.6, got invalid
INFO     pure3270.patching.patching:patching.py:121 Graceful degradation: proceeding with partial compatibility
INFO     pure3270.patching.patching:patching.py:146 Graceful degradation: Version mismatch but continuing with patching
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
PASSED                                                                   [ 44%]
tests/test_patching_integration.py::test_real_p3270_patching
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
INFO     p3270.p3270:p3270.py:153 Disconnect from host (localhost)
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:188 Handling disconnect command
INFO     pure3270.patching.patching:patching.py:211 Unpatched all
PASSED                                                                   [ 44%]
tests/test_patching_integration.py::test_p3270_version_detection PASSED  [ 44%]
tests/test_patching_integration.py::test_patching_with_version_check
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
INFO     pure3270.patching.patching:patching.py:211 Unpatched all
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
WARNING  pure3270.patching.patching:patching.py:118 Version mismatch: expected 0.3.0, got 0.1.6
INFO     pure3270.patching.patching:patching.py:121 Graceful degradation: proceeding with partial compatibility
INFO     pure3270.patching.patching:patching.py:146 Graceful degradation: Version mismatch but continuing with patching
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
INFO     pure3270.patching.patching:patching.py:211 Unpatched all
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
WARNING  pure3270.patching.patching:patching.py:118 Version mismatch: expected 0.3.0, got 0.1.6
INFO     pure3270.patching.patching:patching.py:121 Graceful degradation: proceeding with partial compatibility
ERROR    pure3270.patching.patching:patching.py:24 Version incompatible: 0.1.6
ERROR    pure3270.patching.patching:patching.py:175 Patch error: Version incompatible: 0.1.6
ERROR    pure3270.patching.patching:patching.py:24 Version incompatible: 0.1.6
PASSED                                                                   [ 44%]
tests/test_patching_integration.py::test_patching_unpatch
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.patching:patching.py:46 Initialized MonkeyPatchManager
INFO     pure3270.patching.patching:patching.py:156 Patched Session
INFO     pure3270.patching.patching:patching.py:167 Patched inner S3270 class
INFO     pure3270.patching.patching:patching.py:168 Patches applied
INFO     pure3270.patching.patching:patching.py:211 Unpatched all
PASSED                                                                   [ 44%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_init PASSED [ 45%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_do_command_success PASSED [ 45%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_do_command_failure
-------------------------------- live log call ---------------------------------
ERROR    pure3270.patching.s3270_wrapper:s3270_wrapper.py:63 Error executing command 'Enter': Test error
PASSED                                                                   [ 45%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_execute_command_connect PASSED [ 45%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_execute_command_disconnect PASSED [ 45%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_execute_command_enter PASSED [ 46%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_execute_command_pf PASSED [ 46%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_execute_command_pa PASSED [ 46%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_execute_command_string PASSED [ 46%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_execute_command_clear PASSED [ 46%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_execute_command_home PASSED [ 47%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_execute_command_unknown
-------------------------------- live log call ---------------------------------
WARNING  pure3270.patching.s3270_wrapper:s3270_wrapper.py:136 Unknown command: UnknownCommand
PASSED                                                                   [ 47%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_connect
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:144 Handling connect command: Connect(B:hostname)
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:174 Connecting to hostname: hostname, port: 23
PASSED                                                                   [ 47%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_disconnect
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:188 Handling disconnect command
PASSED                                                                   [ 47%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_enter_success
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:200 Handling enter command
PASSED                                                                   [ 48%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_enter_failure
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:200 Handling enter command
ERROR    pure3270.patching.s3270_wrapper:s3270_wrapper.py:207 Error sending Enter: Test error
PASSED                                                                   [ 48%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_pf_success
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:216 Handling PF command: 1
PASSED                                                                   [ 48%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_pf_failure
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:216 Handling PF command: 1
ERROR    pure3270.patching.s3270_wrapper:s3270_wrapper.py:222 Error handling PF command 'PF(1)': Test error
PASSED                                                                   [ 48%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_pa_success
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:231 Handling PA command: 1
PASSED                                                                   [ 48%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_pa_failure
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:231 Handling PA command: 1
ERROR    pure3270.patching.s3270_wrapper:s3270_wrapper.py:237 Error handling PA command 'PA(1)': Test error
PASSED                                                                   [ 49%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_string_success
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:429 Handling string command: test
PASSED                                                                   [ 49%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_string_failure
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:429 Handling string command: test
ERROR    pure3270.patching.s3270_wrapper:s3270_wrapper.py:435 Error handling String command 'String(test)': Test error
PASSED                                                                   [ 49%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_clear
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:298 Handling clear command
PASSED                                                                   [ 49%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_home_success
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:263 Handling home command
PASSED                                                                   [ 49%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_home_failure
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:263 Handling home command
ERROR    pure3270.patching.s3270_wrapper:s3270_wrapper.py:270 Error sending Home: Test error
PASSED                                                                   [ 50%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_backspace_success
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:243 Handling backspace command
PASSED                                                                   [ 50%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_handle_backspace_failure
-------------------------------- live log call ---------------------------------
INFO     pure3270.patching.s3270_wrapper:s3270_wrapper.py:243 Handling backspace command
ERROR    pure3270.patching.s3270_wrapper:s3270_wrapper.py:250 Error sending BackSpace: Test error
PASSED                                                                   [ 50%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_create_status PASSED [ 50%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_create_error_status PASSED [ 50%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_check PASSED [ 51%]
tests/test_patching_s3270_wrapper.py::TestPure3270S3270Wrapper::test_instance_counting PASSED [ 51%]
tests/test_printer.py::TestPrinterJob::test_init_default PASSED          [ 51%]
tests/test_printer.py::TestPrinterJob::test_init_with_id PASSED          [ 51%]
tests/test_printer.py::TestPrinterJob::test_add_data PASSED              [ 51%]
tests/test_printer.py::TestPrinterJob::test_complete_job
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:61 Printer job test completed
PASSED                                                                   [ 52%]
tests/test_printer.py::TestPrinterJob::test_set_error
-------------------------------- live log call ---------------------------------
ERROR    pure3270.protocol.printer:printer.py:67 Printer job test error: Test error
PASSED                                                                   [ 52%]
tests/test_printer.py::TestPrinterJob::test_get_duration
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:61 Printer job test completed
PASSED                                                                   [ 52%]
tests/test_printer.py::TestPrinterJob::test_get_page_count PASSED        [ 52%]
tests/test_printer.py::TestPrinterJob::test_get_data_size PASSED         [ 53%]
tests/test_printer.py::TestPrinterJob::test_repr PASSED                  [ 53%]
tests/test_printer.py::TestPrinterSession::test_init PASSED              [ 53%]
tests/test_printer.py::TestPrinterSession::test_activate_deactivate
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
INFO     pure3270.protocol.printer:printer.py:120 Printer session deactivated
PASSED                                                                   [ 53%]
tests/test_printer.py::TestPrinterSession::test_start_new_job
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
INFO     pure3270.protocol.printer:printer.py:138 Started new printer job: test_job
PASSED                                                                   [ 53%]
tests/test_printer.py::TestPrinterSession::test_start_new_job_without_activation PASSED [ 54%]
tests/test_printer.py::TestPrinterSession::test_add_scs_data
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
INFO     pure3270.protocol.printer:printer.py:138 Started new printer job: job_1
PASSED                                                                   [ 54%]
tests/test_printer.py::TestPrinterSession::test_handle_print_eoj
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
INFO     pure3270.protocol.printer:printer.py:138 Started new printer job: test
INFO     pure3270.protocol.printer:printer.py:61 Printer job test completed
INFO     pure3270.protocol.printer:printer.py:176 Current printer job finished and stored
PASSED                                                                   [ 54%]
tests/test_printer.py::TestPrinterSession::test_handle_print_eoj_without_active_job
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
WARNING  pure3270.protocol.printer:printer.py:161 PRINT-EOJ received but no active job
PASSED                                                                   [ 54%]
tests/test_printer.py::TestPrinterSession::test_get_current_job
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
INFO     pure3270.protocol.printer:printer.py:138 Started new printer job: test
PASSED                                                                   [ 54%]
tests/test_printer.py::TestPrinterSession::test_get_completed_jobs
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
INFO     pure3270.protocol.printer:printer.py:138 Started new printer job: test1
INFO     pure3270.protocol.printer:printer.py:61 Printer job test1 completed
INFO     pure3270.protocol.printer:printer.py:176 Current printer job finished and stored
PASSED                                                                   [ 55%]
tests/test_printer.py::TestPrinterSession::test_get_job_statistics
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
INFO     pure3270.protocol.printer:printer.py:138 Started new printer job: test1
INFO     pure3270.protocol.printer:printer.py:61 Printer job test1 completed
INFO     pure3270.protocol.printer:printer.py:176 Current printer job finished and stored
INFO     pure3270.protocol.printer:printer.py:138 Started new printer job: test2
INFO     pure3270.protocol.printer:printer.py:61 Printer job test2 completed
INFO     pure3270.protocol.printer:printer.py:176 Current printer job finished and stored
PASSED                                                                   [ 55%]
tests/test_printer.py::TestPrinterSession::test_clear_completed_jobs
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
INFO     pure3270.protocol.printer:printer.py:138 Started new printer job: test1
INFO     pure3270.protocol.printer:printer.py:61 Printer job test1 completed
INFO     pure3270.protocol.printer:printer.py:176 Current printer job finished and stored
INFO     pure3270.protocol.printer:printer.py:138 Started new printer job: test2
INFO     pure3270.protocol.printer:printer.py:61 Printer job test2 completed
INFO     pure3270.protocol.printer:printer.py:176 Current printer job finished and stored
INFO     pure3270.protocol.printer:printer.py:211 Cleared completed printer jobs
PASSED                                                                   [ 55%]
tests/test_printer.py::TestPrinterSession::test_handle_scs_control_code
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
INFO     pure3270.protocol.printer:printer.py:138 Started new printer job: test
INFO     pure3270.protocol.printer:printer.py:61 Printer job test completed
INFO     pure3270.protocol.printer:printer.py:176 Current printer job finished and stored
PASSED                                                                   [ 55%]
tests/test_printer.py::TestPrinterSession::test_handle_unknown_scs_control_code
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
WARNING  pure3270.protocol.printer:printer.py:228 Unhandled SCS control code: 0xff
PASSED                                                                   [ 55%]
tests/test_printer.py::TestPrinterSession::test_process_tn3270e_message_scs_data
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
INFO     pure3270.protocol.printer:printer.py:138 Started new printer job: job_1
PASSED                                                                   [ 56%]
tests/test_printer.py::TestPrinterSession::test_process_tn3270e_message_error_response
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
INFO     pure3270.protocol.printer:printer.py:138 Started new printer job: test
ERROR    pure3270.protocol.printer:printer.py:242 Received error response for sequence 123
ERROR    pure3270.protocol.printer:printer.py:67 Printer job test error: Error response received for sequence 123
PASSED                                                                   [ 56%]
tests/test_printer.py::TestPrinterSession::test_process_tn3270e_message_negative_response
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
INFO     pure3270.protocol.printer:printer.py:138 Started new printer job: test
WARNING  pure3270.protocol.printer:printer.py:254 Unhandled TN3270E data type: RESPONSE
PASSED                                                                   [ 56%]
tests/test_printer.py::TestPrinterSession::test_repr
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.printer:printer.py:112 Printer session activated
PASSED                                                                   [ 56%]
tests/test_printer_emulation.py::test_scs_data_routing
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.data_stream:data_stream.py:476 Received SCS_DATA - routing to printer buffer
PASSED                                                                   [ 56%]
tests/test_printer_emulation.py::test_printer_status_data_handling PASSED [ 57%]
tests/test_printer_emulation.py::test_device_name_assignment
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494651472, writer=<AsyncMock name='mock.writer' spec='StreamWriter' id='140626494246256'>, parser=<MagicMock spec='DataStreamParser' id='140626494253312'>, screen_buffer=<MagicMock name='mock.screen_buffer' id='140626494246592'>, handler=<AsyncMock spec='TN3270Handler' id='140626494244912'>, is_printer_session=False
INFO     pure3270.protocol.negotiator:negotiator.py:1497 Received LU name from host: PRINTER01
PASSED                                                                   [ 57%]
tests/test_protocol.py::TestDataStreamParser::test_init PASSED           [ 57%]
tests/test_protocol.py::TestDataStreamParser::test_parse_wcc PASSED      [ 57%]
tests/test_protocol.py::TestDataStreamParser::test_parse_aid PASSED      [ 57%]
tests/test_protocol.py::TestDataStreamParser::test_parse_sba PASSED      [ 58%]
tests/test_protocol.py::TestDataStreamParser::test_parse_sf PASSED       [ 58%]
tests/test_protocol.py::TestDataStreamParser::test_parse_ra
-------------------------------- live log call ---------------------------------
WARNING  pure3270.protocol.data_stream:data_stream.py:672 RA stub: Repeat 0x40 from (0, 0) to (0, 5)
PASSED                                                                   [ 58%]
tests/test_protocol.py::TestDataStreamParser::test_parse_ge
-------------------------------- live log call ---------------------------------
WARNING  pure3270.protocol.data_stream:data_stream.py:718 Incomplete GE order
PASSED                                                                   [ 58%]
tests/test_protocol.py::TestDataStreamParser::test_parse_write PASSED    [ 59%]
tests/test_protocol.py::TestDataStreamParser::test_parse_data PASSED     [ 59%]
tests/test_protocol.py::TestDataStreamParser::test_parse_bind PASSED     [ 59%]
tests/test_protocol.py::TestDataStreamParser::test_parse_incomplete PASSED [ 59%]
tests/test_protocol.py::TestDataStreamParser::test_get_aid PASSED        [ 59%]
tests/test_protocol.py::TestDataStreamSender::test_build_read_modified_all PASSED [ 60%]
tests/test_protocol.py::TestDataStreamSender::test_build_read_modified_fields PASSED [ 60%]
tests/test_protocol.py::TestDataStreamSender::test_build_key_press PASSED [ 60%]
tests/test_protocol.py::TestDataStreamSender::test_build_write PASSED    [ 60%]
tests/test_protocol.py::TestDataStreamSender::test_build_sba PASSED      [ 60%]
tests/test_protocol.py::TestSSLWrapper::test_init PASSED                 [ 61%]
tests/test_protocol.py::TestSSLWrapper::test_create_context_verify PASSED [ 61%]
tests/test_protocol.py::TestSSLWrapper::test_create_context_no_verify
-------------------------------- live log call ---------------------------------
WARNING  pure3270.protocol.ssl_wrapper:ssl_wrapper.py:54 SSL verification disabled
PASSED                                                                   [ 61%]
tests/test_protocol.py::TestSSLWrapper::test_create_context_error
-------------------------------- live log call ---------------------------------
ERROR    pure3270.protocol.ssl_wrapper:ssl_wrapper.py:71 SSL context creation failed: ('Test error',)
PASSED                                                                   [ 61%]
tests/test_protocol.py::TestSSLWrapper::test_wrap_connection
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.ssl_wrapper:ssl_wrapper.py:86 Using native asyncio SSL support; no additional wrapping needed
PASSED                                                                   [ 61%]
tests/test_protocol.py::TestSSLWrapper::test_get_context PASSED          [ 62%]
tests/test_protocol.py::TestSSLWrapper::test_ssl_encryption_for_data_transit
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.ssl_wrapper:ssl_wrapper.py:86 Using native asyncio SSL support; no additional wrapping needed
PASSED                                                                   [ 62%]
tests/test_protocol.py::TestTN3270Handler::test_connect_non_ssl
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494649872, writer=<AsyncMock id='140626489218720'>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe62864b9b0>, is_printer_session=False
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.tn3270_handler:tn3270_handler.py:193 [HANDLER] Connecting to test-host:23 (ssl=False)
INFO     pure3270.protocol.tn3270_handler:tn3270_handler.py:214 [HANDLER] Starting Telnet negotiation (TTYPE, BINARY, EOR, TN3270E)
INFO     pure3270.protocol.tn3270_handler:tn3270_handler.py:218 [HANDLER] Starting TN3270E subnegotiation
INFO     pure3270.protocol.tn3270_handler:tn3270_handler.py:222 [HANDLER] Negotiation complete
PASSED                                                                   [ 62%]
tests/test_protocol.py::TestTN3270Handler::test_connect_ssl
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494650832, writer=<AsyncMock id='140626494251632'>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe62864bac0>, is_printer_session=False
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.tn3270_handler:tn3270_handler.py:193 [HANDLER] Connecting to test-host:23 (ssl=True)
INFO     pure3270.protocol.tn3270_handler:tn3270_handler.py:214 [HANDLER] Starting Telnet negotiation (TTYPE, BINARY, EOR, TN3270E)
INFO     pure3270.protocol.tn3270_handler:tn3270_handler.py:218 [HANDLER] Starting TN3270E subnegotiation
INFO     pure3270.protocol.tn3270_handler:tn3270_handler.py:222 [HANDLER] Negotiation complete
PASSED                                                                   [ 62%]
tests/test_protocol.py::TestTN3270Handler::test_connect_error
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494650192, writer=<AsyncMock id='140626494665600'>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe62844a150>, is_printer_session=False
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.tn3270_handler:tn3270_handler.py:193 [HANDLER] Connecting to test-host:23 (ssl=False)
PASSED                                                                   [ 62%]
tests/test_protocol.py::TestTN3270Handler::test_negotiate_tn3270_success
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494649232, writer=<AsyncMock id='140626494664592'>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe628449450>, is_printer_session=False
PASSED                                                                   [ 63%]
tests/test_protocol.py::TestTN3270Handler::test_negotiate_tn3270_fail
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494651472, writer=<AsyncMock id='140626494657872'>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe6284473e0>, is_printer_session=False
-------------------------------- live log call ---------------------------------
ERROR    pure3270.protocol.tn3270_handler:tn3270_handler.py:372 Exception in negotiation reader loop
Traceback (most recent call last):
  File "/var/home/dlafreniere/projects/pure3270/pure3270/protocol/tn3270_handler.py", line 353, in _reader_loop
    raise EOFError("Stream ended")
EOFError: Stream ended
PASSED                                                                   [ 63%]
tests/test_protocol.py::TestTN3270Handler::test_send_data
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=<AsyncMock id='140626494655856'>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe6284477a0>, is_printer_session=False
PASSED                                                                   [ 63%]
tests/test_protocol.py::TestTN3270Handler::test_send_data_not_connected
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310032, writer=<AsyncMock id='140626495514880'>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe628447980>, is_printer_session=False
-------------------------------- live log call ---------------------------------
ERROR    pure3270.protocol.errors:errors.py:76 Not connected
PASSED                                                                   [ 63%]
tests/test_protocol.py::TestTN3270Handler::test_receive_data
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310992, writer=<AsyncMock id='140626489214016'>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe628446210>, is_printer_session=False
PASSED                                                                   [ 63%]
tests/test_protocol.py::TestTN3270Handler::test_receive_data_not_connected
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310352, writer=<AsyncMock id='140626495514880'>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe6284465d0>, is_printer_session=False
-------------------------------- live log call ---------------------------------
ERROR    pure3270.protocol.errors:errors.py:76 Not connected
PASSED                                                                   [ 64%]
tests/test_protocol.py::TestTN3270Handler::test_close
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310032, writer=<AsyncMock id='140626495505472'>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe6284454f0>, is_printer_session=False
PASSED                                                                   [ 64%]
tests/test_protocol.py::TestTN3270Handler::test_is_connected
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494311312, writer=<AsyncMock id='140626489220400'>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe62839c230>, is_printer_session=False
PASSED                                                                   [ 64%]
tests/test_protocol.py::TestTN3270Handler::test_tn3270e_negotiation_with_fallback
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494310032, writer=<AsyncMock id='140626494655856'>, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe6284477a0>, is_printer_session=False
PASSED                                                                   [ 64%]
tests/test_protocol.py::test_parse_sample_wcc PASSED                     [ 65%]
tests/test_protocol.py::test_parse_sample_sba PASSED                     [ 65%]
tests/test_protocol.py::test_parse_sample_write PASSED                   [ 65%]
tests/test_protocol.py::test_parse_error PASSED                          [ 65%]
tests/test_protocol.py::test_protocol_error
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494650192, writer=None, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe628445310>, is_printer_session=False
ERROR    pure3270.protocol.errors:errors.py:76 Not connected
PASSED                                                                   [ 65%]
tests/test_protocol.py::test_ssl_error
-------------------------------- live log call ---------------------------------
ERROR    pure3270.protocol.ssl_wrapper:ssl_wrapper.py:71 SSL context creation failed: ('Test',)
PASSED                                                                   [ 66%]
tests/test_protocol.py::test_performance_parse PASSED                    [ 66%]
tests/test_protocol.py::TestNegotiator::test_negotiator_fallback_to_basic
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494648912, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6282d71d0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:636 [NEGOTIATION] Received IAC command: 0xfc, option: 0x28
INFO     pure3270.protocol.negotiator:negotiator.py:740 [NEGOTIATION] Received IAC WONT 0x28
INFO     pure3270.protocol.negotiator:negotiator.py:778 Remote refused TN3270E/TERMINAL-LOCATION (WONT 0x28) -- falling back to ASCII/VT100 mode
INFO     pure3270.protocol.negotiator:negotiator.py:590 Switched to ASCII/VT100 mode (s3270 compatibility)
PASSED                                                                   [ 66%]
tests/test_protocol.py::TestNegotiator::test_negotiator_supported_functions_eot_ga
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494650192, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe6282d6ba0>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:1224 Server enabled functions: 0x04
PASSED                                                                   [ 66%]
tests/test_protocol.py::TestNegotiator::test_negotiator_partial_negotiation_error_recovery
-------------------------------- live log setup --------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494648912, writer=None, parser=<pure3270.protocol.data_stream.DataStreamParser object at 0x7fe627e24310>, screen_buffer=ScreenBuffer(24x80, fields=0), handler=None, is_printer_session=False
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:444 [NEGOTIATION] Starting TN3270E negotiation: waiting for server DEVICE-TYPE SEND.
ERROR    pure3270.protocol.errors:errors.py:62 Socket/SSL operation failed:
Traceback (most recent call last):
  File "/var/home/dlafreniere/projects/pure3270/pure3270/protocol/negotiator.py", line 454, in _negotiate_tn3270
    await asyncio.wait_for(self._device_type_is_event.wait(), timeout=5.0)
  File "/usr/lib64/python3.13/unittest/mock.py", line 2321, in _execute_mock_call
    raise effect
TimeoutError
ERROR    pure3270.protocol.negotiator:negotiator.py:558 [NEGOTIATION] Error during TN3270E negotiation: Protocol operation failed:
Traceback (most recent call last):
  File "/var/home/dlafreniere/projects/pure3270/pure3270/protocol/negotiator.py", line 454, in _negotiate_tn3270
    await asyncio.wait_for(self._device_type_is_event.wait(), timeout=5.0)
  File "/usr/lib64/python3.13/unittest/mock.py", line 2321, in _execute_mock_call
    raise effect
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/var/home/dlafreniere/projects/pure3270/pure3270/protocol/negotiator.py", line 449, in _negotiate_tn3270
    async with safe_socket_operation():
               ~~~~~~~~~~~~~~~~~~~~~^^
  File "/var/home/dlafreniere/projects/pure3270/pure3270/protocol/errors.py", line 63, in __aexit__
    raise ProtocolError(f"Protocol operation failed: {exc_val}")
pure3270.exceptions.ProtocolError: Protocol operation failed:
INFO     pure3270.protocol.negotiator:negotiator.py:590 Switched to ASCII/VT100 mode (s3270 compatibility)
ERROR    pure3270.protocol.errors:errors.py:98 Negotiation failed: TN3270E negotiation failed: Protocol operation failed: : Protocol operation failed:
Traceback (most recent call last):
  File "/var/home/dlafreniere/projects/pure3270/pure3270/protocol/negotiator.py", line 454, in _negotiate_tn3270
    await asyncio.wait_for(self._device_type_is_event.wait(), timeout=5.0)
  File "/usr/lib64/python3.13/unittest/mock.py", line 2321, in _execute_mock_call
    raise effect
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/var/home/dlafreniere/projects/pure3270/pure3270/protocol/negotiator.py", line 449, in _negotiate_tn3270
    async with safe_socket_operation():
               ~~~~~~~~~~~~~~~~~~~~~^^
  File "/var/home/dlafreniere/projects/pure3270/pure3270/protocol/errors.py", line 63, in __aexit__
    raise ProtocolError(f"Protocol operation failed: {exc_val}")
pure3270.exceptions.ProtocolError: Protocol operation failed:
PASSED                                                                   [ 66%]
tests/test_protocol.py::TestTN3270EHeader::test_tn3270e_header_parse_bind_image PASSED [ 67%]
tests/test_protocol.py::TestTN3270EHeader::test_tn3270e_header_ra_response PASSED [ 67%]
tests/test_protocol.py::TestTN3270EHeader::test_tn3270e_header_invalid_parsing PASSED [ 67%]
tests/test_protocol.py::TestTN3270EHeader::test_tn3270e_header_to_bytes_roundtrip PASSED [ 67%]
tests/test_protocol.py::TestTN3270EHeader::test_tn3270e_header_is_methods PASSED [ 67%]
tests/test_protocol_errors.py::test_parse_error PASSED                   [ 68%]
tests/test_protocol_errors.py::test_protocol_error
-------------------------------- live log call ---------------------------------
INFO     pure3270.protocol.negotiator:negotiator.py:134 Negotiator created: id=140626494648912, writer=None, parser=None, screen_buffer=ScreenBuffer(24x80, fields=0), handler=<pure3270.protocol.tn3270_handler.TN3270Handler object at 0x7fe628444410>, is_printer_session=False
ERROR    pure3270.protocol.errors:errors.py:76 Not connected
PASSED                                                                   [ 68%]
tests/test_protocol_errors.py::test_ssl_error
-------------------------------- live log call ---------------------------------
ERROR    pure3270.protocol.ssl_wrapper:ssl_wrapper.py:71 SSL context creation failed: ('Test',)
PASSED                                                                   [ 68%]
tests/test_protocol_performance.py::test_performance_parse
INTERNALERROR> Traceback (most recent call last):
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/main.py", line 289, in wrap_session
INTERNALERROR>     session.exitstatus = doit(config, session) or 0
INTERNALERROR>                          ~~~~^^^^^^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/main.py", line 343, in _main
INTERNALERROR>     config.hook.pytest_runtestloop(session=session)
INTERNALERROR>     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
INTERNALERROR>     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
INTERNALERROR>            ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
INTERNALERROR>     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
INTERNALERROR>            ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 167, in _multicall
INTERNALERROR>     raise exception
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
INTERNALERROR>     teardown.throw(exception)
INTERNALERROR>     ~~~~~~~~~~~~~~^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/logging.py", line 801, in pytest_runtestloop
INTERNALERROR>     return (yield)  # Run all the tests.
INTERNALERROR>             ^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
INTERNALERROR>     teardown.throw(exception)
INTERNALERROR>     ~~~~~~~~~~~~~~^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/terminal.py", line 688, in pytest_runtestloop
INTERNALERROR>     result = yield
INTERNALERROR>              ^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
INTERNALERROR>     res = hook_impl.function(*args)
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/main.py", line 367, in pytest_runtestloop
INTERNALERROR>     item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
INTERNALERROR>     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
INTERNALERROR>     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
INTERNALERROR>            ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
INTERNALERROR>     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
INTERNALERROR>            ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 167, in _multicall
INTERNALERROR>     raise exception
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
INTERNALERROR>     teardown.throw(exception)
INTERNALERROR>     ~~~~~~~~~~~~~~^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/warnings.py", line 90, in pytest_runtest_protocol
INTERNALERROR>     return (yield)
INTERNALERROR>             ^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
INTERNALERROR>     teardown.throw(exception)
INTERNALERROR>     ~~~~~~~~~~~~~~^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/assertion/__init__.py", line 192, in pytest_runtest_protocol
INTERNALERROR>     return (yield)
INTERNALERROR>             ^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
INTERNALERROR>     teardown.throw(exception)
INTERNALERROR>     ~~~~~~~~~~~~~~^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
INTERNALERROR>     return result.get_result()
INTERNALERROR>            ~~~~~~~~~~~~~~~~~^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_result.py", line 103, in get_result
INTERNALERROR>     raise exc.with_traceback(tb)
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
INTERNALERROR>     res = yield
INTERNALERROR>           ^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
INTERNALERROR>     teardown.throw(exception)
INTERNALERROR>     ~~~~~~~~~~~~~~^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/unittest.py", line 475, in pytest_runtest_protocol
INTERNALERROR>     return (yield)
INTERNALERROR>             ^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
INTERNALERROR>     teardown.throw(exception)
INTERNALERROR>     ~~~~~~~~~~~~~~^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/faulthandler.py", line 88, in pytest_runtest_protocol
INTERNALERROR>     return (yield)
INTERNALERROR>             ^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
INTERNALERROR>     res = hook_impl.function(*args)
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/runner.py", line 117, in pytest_runtest_protocol
INTERNALERROR>     runtestprotocol(item, nextitem=nextitem)
INTERNALERROR>     ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/runner.py", line 136, in runtestprotocol
INTERNALERROR>     reports.append(call_and_report(item, "call", log))
INTERNALERROR>                    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/runner.py", line 248, in call_and_report
INTERNALERROR>     report: TestReport = ihook.pytest_runtest_makereport(item=item, call=call)
INTERNALERROR>                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
INTERNALERROR>     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
INTERNALERROR>            ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
INTERNALERROR>     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
INTERNALERROR>            ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 167, in _multicall
INTERNALERROR>     raise exception
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
INTERNALERROR>     teardown.throw(exception)
INTERNALERROR>     ~~~~~~~~~~~~~~^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/tmpdir.py", line 308, in pytest_runtest_makereport
INTERNALERROR>     rep = yield
INTERNALERROR>           ^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
INTERNALERROR>     teardown.throw(exception)
INTERNALERROR>     ~~~~~~~~~~~~~~^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 43, in run_old_style_hookwrapper
INTERNALERROR>     teardown.send(result)
INTERNALERROR>     ~~~~~~~~~~~~~^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_hypothesis_pytestplugin.py", line 338, in pytest_runtest_makereport
INTERNALERROR>     report = (yield).get_result()
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_result.py", line 103, in get_result
INTERNALERROR>     raise exc.with_traceback(tb)
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
INTERNALERROR>     res = yield
INTERNALERROR>           ^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
INTERNALERROR>     teardown.throw(exception)
INTERNALERROR>     ~~~~~~~~~~~~~~^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
INTERNALERROR>     return result.get_result()
INTERNALERROR>            ~~~~~~~~~~~~~~~~~^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_result.py", line 103, in get_result
INTERNALERROR>     raise exc.with_traceback(tb)
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
INTERNALERROR>     res = yield
INTERNALERROR>           ^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
INTERNALERROR>     teardown.throw(exception)
INTERNALERROR>     ~~~~~~~~~~~~~~^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/skipping.py", line 275, in pytest_runtest_makereport
INTERNALERROR>     rep = yield
INTERNALERROR>           ^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
INTERNALERROR>     res = hook_impl.function(*args)
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/runner.py", line 368, in pytest_runtest_makereport
INTERNALERROR>     return TestReport.from_item_and_call(item, call)
INTERNALERROR>            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/reports.py", line 377, in from_item_and_call
INTERNALERROR>     longrepr = item.repr_failure(excinfo)
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/python.py", line 1713, in repr_failure
INTERNALERROR>     return self._repr_failure_py(excinfo, style=style)
INTERNALERROR>            ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/nodes.py", line 456, in _repr_failure_py
INTERNALERROR>     return excinfo.getrepr(
INTERNALERROR>            ~~~~~~~~~~~~~~~^
INTERNALERROR>         funcargs=True,
INTERNALERROR>         ^^^^^^^^^^^^^^
INTERNALERROR>     ...<5 lines>...
INTERNALERROR>         truncate_args=truncate_args,
INTERNALERROR>         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
INTERNALERROR>     )
INTERNALERROR>     ^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/_code/code.py", line 766, in getrepr
INTERNALERROR>     return fmt.repr_excinfo(self)
INTERNALERROR>            ~~~~~~~~~~~~~~~~^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/_code/code.py", line 1202, in repr_excinfo
INTERNALERROR>     reprtraceback = self.repr_traceback(excinfo_)
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/_code/code.py", line 1135, in repr_traceback
INTERNALERROR>     self.repr_traceback_entry(entry, excinfo if last == entry else None)
INTERNALERROR>     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/_code/code.py", line 1065, in repr_traceback_entry
INTERNALERROR>     source = self._getentrysource(entry)
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/_code/code.py", line 903, in _getentrysource
INTERNALERROR>     source = entry.getsource(self.astcache)
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/_code/code.py", line 300, in getsource
INTERNALERROR>     astnode, _, end = getstatementrange_ast(
INTERNALERROR>                       ~~~~~~~~~~~~~~~~~~~~~^
INTERNALERROR>         self.lineno, source, astnode=astnode
INTERNALERROR>         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
INTERNALERROR>     )
INTERNALERROR>     ^
INTERNALERROR>   File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/_code/source.py", line 191, in getstatementrange_ast
INTERNALERROR>   File "/usr/lib64/python3.13/ast.py", line 50, in parse
INTERNALERROR>     return compile(source, filename, mode, flags,
INTERNALERROR>                    _feature_version=feature_version, optimize=optimize)
INTERNALERROR> MemoryError
Traceback (most recent call last):
  File "/var/home/dlafreniere/.local/bin/pytest", line 8, in <module>
    sys.exit(console_main())
             ~~~~~~~~~~~~^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/config/__init__.py", line 201, in console_main
    code = main()
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/config/__init__.py", line 175, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 167, in _multicall
    raise exception
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/main.py", line 336, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/main.py", line 324, in wrap_session
    config.hook.pytest_sessionfinish(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        session=session, exitstatus=session.exitstatus
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 167, in _multicall
    raise exception
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
    teardown.throw(exception)
    ~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/logging.py", line 873, in pytest_sessionfinish
    return (yield)
            ^^^^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
    teardown.throw(exception)
    ~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/terminal.py", line 934, in pytest_sessionfinish
    result = yield
             ^^^^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
    teardown.throw(exception)
    ~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    return result.get_result()
           ~~~~~~~~~~~~~~~~~^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_result.py", line 103, in get_result
    raise exc.with_traceback(tb)
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    res = yield
          ^^^^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 139, in _multicall
    teardown.throw(exception)
    ~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/warnings.py", line 119, in pytest_sessionfinish
    return (yield)
            ^^^^^
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/var/home/dlafreniere/.local/lib/python3.13/site-packages/_pytest/junitxml.py", line 675, in pytest_sessionfinish
    logfile.write(ET.tostring(testsuites, encoding="unicode"))
                  ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib64/python3.13/xml/etree/ElementTree.py", line 1090, in tostring
    ElementTree(element).write(stream, encoding,
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
                               xml_declaration=xml_declaration,
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                               default_namespace=default_namespace,
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                               method=method,
                               ^^^^^^^^^^^^^^
                               short_empty_elements=short_empty_elements)
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib64/python3.13/xml/etree/ElementTree.py", line 735, in write
    serialize(write, self._root, qnames, namespaces,
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
              short_empty_elements=short_empty_elements)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib64/python3.13/xml/etree/ElementTree.py", line 898, in _serialize_xml
    _serialize_xml(write, e, qnames, None,
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
                   short_empty_elements=short_empty_elements)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib64/python3.13/xml/etree/ElementTree.py", line 898, in _serialize_xml
    _serialize_xml(write, e, qnames, None,
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
                   short_empty_elements=short_empty_elements)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib64/python3.13/xml/etree/ElementTree.py", line 898, in _serialize_xml
    _serialize_xml(write, e, qnames, None,
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
                   short_empty_elements=short_empty_elements)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib64/python3.13/xml/etree/ElementTree.py", line 896, in _serialize_xml
    write(_escape_cdata(text))
    ~~~~~^^^^^^^^^^^^^^^^^^^^^
MemoryError
